- google-gmock:
    <<: *thirdparty_defaults
    version: 1.7.0.1
    mask: w
    mode: dr
    depends:
        - google-gtest
    source: https://googlemock.googlecode.com/files/gmock-1.7.0.zip
    uncompress_strip: gmock-1.7.0
    cmake_definitions:
        - BUILD_SHARED_LIBS=ON
        - gtest_disable_pthreads=OFF
        - gmock_build_tests=ON
    unittest:
        |
            #include <gmock/gmock.h>
            int main()
            {
                return 0;
            }
    targets:
        - gmock:
            info:
                <<: *library_dynamic_exact
            extra:
                Linux_Ubuntu_trusty_x86_64:
                    system_depends:
                        - pthread
                    definitions:
                        - -DGTEST_LINKED_AS_SHARED_LIBRARY=1

        - gmock_main:
            info:
                <<: *library_dynamic_exact

- google-gmock:
    <<: *thirdparty_defaults
    version: 0.0.0.0
    version_manager: git
    mask: ls
    source: https://github.com/google/googletest.git
    cmake_definitions:
        - BUILD_SHARED_LIBS=OFF
        - BUILD_GMOCK=ON
        - GTEST_HAS_PTHREAD=0
    targets:
        - gmock:
            info:
                <<: *library_static_exact
            # extra:
            #     Linux_Ubuntu_trusty_x86_64:
            #         system_depends:
            #             - pthread
        - gmock_main:
            info:
                <<: *library_static_exact

